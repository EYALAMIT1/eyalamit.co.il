jQuery(document).ready(function($){$(document).on("change",".envirabox-wrap table.variations select",function(e){console.log($(".envirabox-wrap table.variations select > option:not(:selected)").length);var o=!0;if($(".envirabox-wrap table.variations select").each(function(){""==$(this).find("option:selected").val()&&(o=!1)}),o!==!1){console.log("all_selected"),console.log(o);var n=$(this).closest("form").data("product_variations"),a=new Array,i=0;$(".envirabox-wrap table.variations select").each(function(){console.log(this.value),console.log(this.name),a[this.name]=new Array,a[this.name][0]=this.value,i++}),console.log("chosen"),console.log(a);var r=!1,i=0,t=0;$.each(n,function(e,o){var n=o.variation_id,i=0;return console.log("variation_id: "+n),$.each(o.attributes,function(e,o){console.log("****"),console.log(e),console.log(a[e]),a[e]==o&&(console.log("MATCH"),i++),console.log(o),console.log("****")}),i==$(".envirabox-wrap table.variations select").length?(t=n,console.log("main_variation_id:"+t),r=!0,!1):void 0}),$(this).closest("form").find('input[name="variation_id"]').val(t),console.log("test")}})}),function($){var e=$.envirabox;envira_woocommerce.woocommerce_is_active&&(e.helpers.woocommerce={defaults:{gallery_id:""},container:null,is_supersize:!1,beforeShow:function(e,o){envira_woocommerce.debug&&console.log("beforeShow"),this.beforeClose(),o.tpl.wrap.search("envira-supersize")>-1&&(this.is_supersize=!0),this.container=$('<div id="envira-woocommerce"'+(this.is_supersize?' class="envira-supersize"':"")+"></div>"),this.container.appendTo("div.envirabox-inner");var n=o.group[o.index];if("undefined"==typeof n.element)var a=n.id;else var a=n.element.find("img").data("envira-item-id");var i=this.container,r=0==e.gallery_id.length?n.gallery_id:e.gallery_id;$.ajax({url:envira_woocommerce.ajax,type:"post",data:{action:"envira_woocommerce_get_add_to_cart_form",gallery_id:r,attachment_id:a,nonce:envira_woocommerce.get_add_to_cart_form_nonce},success:function(e){envira_woocommerce.debug&&console.log(e),e.success&&0!=e.data.length&&(i.html(e.data.woocommerce_form),i.fadeIn())},error:function(e,o,n){envira_woocommerce.debug&&(console.log(e),console.log(o),console.log(n))}})},beforeClose:function(){envira_woocommerce.debug&&console.log("beforeClose"),this.container&&(this.container.remove(),this.container=null)}})}(jQuery);