# תוכנית פעולה: העלאת האתר המעודכן לייצור
## עדכון WordPress מ-5.2.2 ל-6.8.3

**תאריך הכנה:** נובמבר 2025  
**מטרה:** העלאת האתר המעודכן מהסביבה המקומית לייצור בצורה בטוחה ומסודרת

---

## ⚠️ כללים חשובים לפני תחילת העבודה

1. **גיבוי לפני הכל** - תמיד עשה גיבוי מלא לפני כל שינוי
2. **עבודה בשעות שקטות** - עדיף לעדכן בלילה או בשעות פחות עמוסות
3. **אחד אחד** - עבוד שלב שלב, אל תקפוץ לשלב הבא לפני שהשלב הנוכחי הושלם
4. **תיעוד** - רשום כל פעולה שעשית (למה נצליח, מה לא)
5. **תוכנית שחזור** - תמיד יש תוכנית איך לחזור אחורה אם משהו נכשל

---

## שלב 0: הכנה וחשיבה לפני

### 0.1 בדיקת רשימת בדיקות מקומיות

**לפני שאתה מתחיל - ודא שסיימת את כל הבדיקות המקומיות!**

ראה: `docs/PRE-PRODUCTION-CHECKLIST.md`

- [ ] כל הבדיקות הקריטיות עברו ✅
- [ ] אין שגיאות Fatal
- [ ] WooCommerce עובד
- [ ] כל הדפים החשובים נטענים
- [ ] טפסים עובדים

**אם יש בעיות קריטיות - תקן אותן קודם!**

---

### 0.2 הכנת רשימת גישה

**חשוב:** ודא שיש לך גישה לכל הכלים:

- [ ] **FTP/C Panel** - גישה לשרת הייצור
- [ ] **phpMyAdmin** - גישה לבסיס הנתונים בייצור
- [ ] **SSH** - אם יש (לא חובה)
- [ ] **Admin WordPress** - גישה ל-Admin בייצור
- [ ] **Hosting Control Panel** - אם יש

**פרטי גישה:**
- FTP Host: _______________________________________________
- Username: _______________________________________________
- Password: _______________________________________________
- Database Name: _______________________________________________
- DB User: _______________________________________________
- DB Password: _______________________________________________

---

### 0.3 בחירת זמן העדכון

- [ ] **בחר זמן שקט** - לילה/בוקר מוקדם/סוף שבוע
- [ ] **הודע למשתמשים** - אם יש משתמשים קבועים
- [ ] **תזמן זמן** - תכנן לפחות 2-3 שעות לעבודה (במקרה של בעיות)

**תאריך ושעה מתוכננים:**
- תאריך: _______________________________________________
- שעה: _______________________________________________

---

## שלב 1: גיבוי מלא של אתר ייצור (חובה!)

### 1.1 גיבוי בסיס נתונים

**דרך phpMyAdmin:**

1. פתח phpMyAdmin
2. בחר את בסיס הנתונים של האתר
3. לחץ על **"Export"** (יצוא)
4. בחר **"Quick"** או **"Custom"**
5. לחץ על **"Go"** (לך)
6. שמור את הקובץ בשם: `production_backup_DB_[תאריך]_[שעה].sql`

**דרך WP-CLI (אם יש SSH):**
```bash
wp db export production_backup_DB_[תאריך]_[שעה].sql
```

- [ ] **גיבוי DB הושלם** - קובץ נוצר ונסוחן למחשב המקומי
- [ ] **גודל הגיבוי** - בדוק שהקובץ לא ריק (צריך להיות לפחות כמה MB)
- [ ] **מיקום הגיבוי** - שמור במקום בטוח (לא על השרת!)

**מיקום הגיבוי:** _______________________________________________

---

### 1.2 גיבוי קבצים

**דרך FTP:**

1. התחבר ל-FTP של הייצור
2. עבור לתיקיית האתר (בדרך כלל `public_html` או `www` או שם האתר)
3. **הורד** את כל התיקייה למחשב המקומי
   - דרך FileZilla: בחר את כל הקבצים, לחץ לחיצה ימנית → Download
   - או: ZIP את התיקייה דרך cPanel File Manager → הורד את ה-ZIP

**דרך cPanel File Manager:**

1. פתח cPanel → File Manager
2. עבור לתיקיית האתר
3. בחר את כל הקבצים → Compress → ZIP
4. הורד את הקובץ

- [ ] **גיבוי קבצים הושלם** - כל הקבצים הועתקו או הורדו
- [ ] **גודל הגיבוי** - בדוק שיש קבצים (לא תיקייה ריקה)
- [ ] **מיקום הגיבוי** - שמור במקום בטוח

**מיקום הגיבוי:** _______________________________________________

---

### 1.3 וידוא הגיבוי

**חשוב מאוד:** ודא שהגיבוי תקין!

- [ ] **בסיס נתונים** - פתח את הקובץ SQL ובדוק שיש תוכן (לא קובץ ריק)
- [ ] **קבצים** - פתח את התיקייה ובדוק שיש קבצים (wp-config.php, wp-content, וכו')
- [ ] **wp-config.php** - יש קובץ wp-config.php בגיבוי

**הערות:**
_______________________________________________

---

## שלב 2: העתקת קבצים מהסביבה המקומית לייצור

### 2.1 רשימת מה צריך להעתיק

**✅ כן - צריך להעתיק:**

- ✅ **wp-admin/** - תיקיית Admin (כל הקבצים המעודכנים)
- ✅ **wp-includes/** - תיקיית Core של WordPress (כל הקבצים המעודכנים)
- ✅ **wp-content/themes/** - כל התבניות (כולל bridge ו-bridge-child)
- ✅ **wp-content/plugins/** - כל הפלאגינים המעודכנים
- ✅ **wp-content/languages/** - קבצי שפה
- ✅ **כל הקבצים ברמה העליונה:**
  - `index.php`
  - `license.txt`
  - `readme.html`
  - `wp-activate.php`
  - `wp-blog-header.php`
  - `wp-comments-post.php`
  - `wp-config-sample.php`
  - `wp-cron.php`
  - `wp-links-opml.php`
  - `wp-load.php`
  - `wp-login.php`
  - `wp-mail.php`
  - `wp-settings.php`
  - `wp-signup.php`
  - `wp-trackback.php`
  - `xmlrpc.php`

**❌ לא - אל תעתיק:**

- ❌ **wp-config.php** - אל תעתיק! (צריך לעדכן ידנית - ראה שלב 2.3)
- ❌ **wp-content/uploads/** - בדרך כלל לא צריך (אלא אם יש תמונות חדשות)
- ❌ **wp-content/cache/** - לא צריך (cache)
- ❌ **wp-content/upgrade/** - תיקייה זמנית
- ❌ **.htaccess** - רק אם יש שינויים ספציפיים (אבל בדרך כלל לא צריך)

---

### 2.2 איך להעתיק

**דרך FTP (מומלץ - בטוח יותר):**

1. התחבר ל-FTP של הייצור
2. עבור לתיקיית האתר
3. **לכל תיקייה/קובץ:**
   - מצא את אותו קובץ/תיקייה בגיבוי המקומי
   - העלה את הקובץ/תיקייה לייצור
   - **שמור** אם המערכת שואלת (Overwrite)

**סדר העדכון (מומלץ):**

1. **תחילה - קבצי Core:** `wp-admin/` ו-`wp-includes/`
2. **שנית - תבניות:** `wp-content/themes/`
3. **שלישית - פלאגינים:** `wp-content/plugins/`
4. **אחרון - קבצים ברמה העליונה**

**דרך cPanel File Manager:**

1. פתח cPanel → File Manager
2. עבור לתיקיית האתר
3. העלה קבצים/תיקיות דרך Upload
4. דרוס קבצים קיימים

- [ ] **wp-admin/** הועתקה ✅
- [ ] **wp-includes/** הועתקה ✅
- [ ] **wp-content/themes/** הועתקה ✅
- [ ] **wp-content/plugins/** הועתקה ✅
- [ ] **קבצים ברמה העליונה** הועתקו ✅

**הערות:**
_______________________________________________

---

### 2.3 עדכון wp-config.php בייצור

**⚠️ זה מאוד חשוב! אל תעתיק את wp-config.php מהמקומי!**

**מה צריך לעשות:**

1. פתח את `wp-config.php` של הייצור (דרך FTP/File Manager)
2. **הוסף** את השורות הבאות (אם אין כבר):

```php
// הגדרות זיכרון PHP (חשוב!)
define('WP_MEMORY_LIMIT', '512M');
define('WP_MAX_MEMORY_LIMIT', '512M');
```

3. **ודא** שהגדרות הבסיס נתונים נכונות (נשארות כמו שהיו):
   - `DB_NAME`
   - `DB_USER`
   - `DB_PASSWORD`
   - `DB_HOST`

4. **שמור** את הקובץ

- [ ] **wp-config.php עודכן** - הוספת הגדרות זיכרון
- [ ] **הגדרות DB נכונות** - לא השתנו

**הערות:**
_______________________________________________

---

## שלב 3: עדכון בסיס הנתונים

### 3.1 עדכון מסד נתונים WordPress

**דרך Admin Panel:**

1. פתח את האתר בייצור: `https://yourdomain.com/wp-admin`
2. **אם WordPress מזהה עדכון** - תראה הודעה:
   - "Database Update Required" (עדכון מסד נתונים נדרש)
3. לחץ על **"Update Database"** (עדכן מסד נתונים)
4. המתן עד שהעדכון יסתיים

**דרך WP-CLI (אם יש SSH):**
```bash
wp core update-db
```

**דרך phpMyAdmin (אם אין אפשרות אחרת):**

1. פתח phpMyAdmin
2. בחר את בסיס הנתונים
3. פתח את הטבלה `wp_options`
4. מצא את השורה עם `option_name = 'db_version'`
5. שנה את `option_value` ל-`60421` (גרסת DB של WordPress 6.8.3)

- [ ] **מסד נתונים עודכן** ✅
- [ ] **אין שגיאות** - האתר עובד תקין

**הערות:**
_______________________________________________

---

## שלב 4: בדיקות ראשוניות בייצור

### 4.1 בדיקות מיידיות

**ביצוע מיד לאחר העתקה:**

1. **פתח את האתר:**
   - URL: `https://yourdomain.com`
   - [ ] האתר נטען ✅
   - [ ] אין שגיאות 500/404 ✅

2. **פתח Admin Panel:**
   - URL: `https://yourdomain.com/wp-admin`
   - [ ] אפשר להתחבר ✅
   - [ ] הדשבורד נטען ✅

3. **בדוק גרסת WordPress:**
   - Admin → Dashboard → At a Glance
   - [ ] גרסת WordPress: **6.8.3** ✅

**אם יש שגיאות:**

- ❌ **שגיאת 500** - ראה "תוכנית שחזור" למטה
- ❌ **לא יכול להתחבר** - בדוק wp-config.php
- ❌ **דף לבן** - בדוק שגיאות ב-logs

**הערות:**
_______________________________________________

---

### 4.2 בדיקת פלאגינים

1. Admin → Plugins
2. בדוק שכל הפלאגינים עדיין פעילים
3. בדוק גרסאות:
   - [ ] Google Site Kit: **1.165.0** ✅
   - [ ] Yoast SEO: **26.3** ✅
   - [ ] WooCommerce: **10.3.5** ✅

**אם יש פלאגינים לא פעילים:**
- הפעל אותם אחד אחד
- בדוק שאין שגיאות

**הערות:**
_______________________________________________

---

### 4.3 בדיקת דפים חשובים

**רשימת דפים לבדיקה:**

- [ ] **עמוד ראשי** - `https://yourdomain.com` ✅
- [ ] **דף אודות** - (אם יש) ✅
- [ ] **דף צור קשר** - (אם יש) ✅
- [ ] **דף חנות** - `https://yourdomain.com/shop` (אם יש WooCommerce) ✅
- [ ] **דף מוצר** - דף מוצר יחיד ✅
- [ ] **דף Checkout** - (אם יש WooCommerce) ✅

**בעיות שנמצאו:**
_______________________________________________

---

## שלב 5: בדיקות פונקציונליות

### 5.1 בדיקת WooCommerce

**בדיקות חובה:**

- [ ] **דף חנות נטען** - כל המוצרים נראים
- [ ] **דף מוצר נטען** - פרטי המוצר נראים
- [ ] **הוספה לעגלה** - אפשר להוסיף מוצר לעגלה
- [ ] **עגלה עובדת** - המוצרים בעגלה
- [ ] **Checkout עובד** - אפשר למלא טופס הזמנה
- [ ] **תשלום** - תהליך תשלום עובד (בדיקה עם תשלום בדיקה)

**אם יש בעיות:**
- בדוק ב-logs: `wp-content/debug.log` (אם מופעל)
- בדוק ב-Admin → WooCommerce → System Status

**הערות:**
_______________________________________________

---

### 5.2 בדיקת טפסים

- [ ] **טופס צור קשר** - אפשר לשלוח טופס בדיקה
- [ ] **אימייל נשלח** - אימייל מגיע (בדוק inbox)
- [ ] **הודעת הצלחה** - מופיעה לאחר שליחה

**הערות:**
_______________________________________________

---

### 5.3 בדיקת Google Site Kit

**חשוב:** בסביבת ייצור אפשר להתחבר לחשבון Google!

1. Admin → Site Kit → Start Setup
2. התחבר לחשבון Google שלך
3. אפשר גישה לאתר
4. בדוק שהנתונים מתחילים להתעדכן

- [ ] **חיבור Google** - התחברות הצליחה ✅
- [ ] **נתונים מתעדכנים** - Analytics/Search Console מחוברים ✅

**הערות:**
_______________________________________________

---

## שלב 6: בדיקות אחרונות

### 6.1 בדיקת תבנית Bridge

- [ ] **כל העמודים שנבנו ב-Visual Composer עובדים**
- [ ] **RevSlider/LayerSlider עובדים** (אם יש)
- [ ] **תפריט ניווט עובד**
- [ ] **תפריט נייד עובד**

**הערות:**
_______________________________________________

---

### 6.2 בדיקת Mobile/Responsive

- [ ] **האתר נראה טוב במובייל**
- [ ] **תפריט נייד עובד**
- [ ] **טפסים עובדים במובייל**
- [ ] **WooCommerce עובד במובייל**

**הערות:**
_______________________________________________

---

### 6.3 בדיקת מהירות

- [ ] **זמן טעינה סביר** - פחות מ-5 שניות
- [ ] **תמונות מותאמות** - לא גדולות מדי

**הערות:**
_______________________________________________

---

## שלב 7: ניקוי Cache

### 7.1 ניקוי Cache

**אם יש WP Rocket או כלי Cache אחר:**

1. Admin → WP Rocket → Clear Cache
2. או: מחק ידנית `wp-content/cache/`

**אם יש Cache ברמת Hosting:**

1. פתח את Control Panel של Hosting
2. נקה Cache אם יש אפשרות

- [ ] **Cache נוקה** ✅

---

## תוכנית שחזור - אם משהו נכשל

### אם יש שגיאת 500 או אתר לא עובד:

1. **אל תיבהל!** - יש לך גיבוי מלא
2. **שחזר את wp-config.php:**
   - מהגיבוי, קח את wp-config.php הישן
   - העלה אותו לייצור
   - ודא שההגדרות נכונות
3. **אם עדיין לא עובד:**
   - שחזר את בסיס הנתונים מהגיבוי
   - דרך phpMyAdmin: Import → בחר את קובץ הגיבוי
4. **אם עדיין לא עובד:**
   - שחזר את כל הקבצים מהגיבוי

**חשוב:** תמיד שמור את הגיבוי במקום בטוח!

---

### אם פלאגין לא עובד:

1. **כבה את הפלאגין** - Admin → Plugins → Deactivate
2. **בדוק שהאתר עובד**
3. **נסה להפעיל שוב** - אם לא עובד, תשאיר כבוי
4. **פנה למפתח** - אם זה פלאגין קריטי

---

### אם WooCommerce לא עובד:

1. **בדוק שגיאות:** Admin → WooCommerce → System Status
2. **נקה Cache:** WooCommerce → Status → Tools → Clear Cache
3. **חזור על עדכון DB:** WooCommerce → Status → Tools → Update Database

---

## סיכום והחלטה

### ✅ העדכון הצליח אם:

- ✅ האתר נטען ונע
- ✅ אין שגיאות 500
- ✅ כל הדפים החשובים עובדים
- ✅ WooCommerce עובד
- ✅ טפסים עובדים
- ✅ Admin נגיש

### ❌ צריך לחזור אחורה אם:

- ❌ האתר לא נטען (500 error)
- ❌ לא יכול להתחבר ל-Admin
- ❌ WooCommerce לא עובד (וקריטי)
- ❌ יש בעיות קריטיות

---

## תאריך ושעה:

**תאריך העדכון:** _______________________________________________  
**שעה התחלה:** _______________________________________________  
**שעה סיום:** _______________________________________________  
**מי ביצע:** _______________________________________________

---

## הערות סופיות:

_______________________________________________
_______________________________________________
_______________________________________________
_______________________________________________

