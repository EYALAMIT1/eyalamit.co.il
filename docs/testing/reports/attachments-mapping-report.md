# דוח מיפוי קבצים לעמודים
**תאריך:** 2026-01-14  
**Task ID:** EA-V11-ATTACHMENTS-MAPPING  
**סטטוס:** ✅ COMPLETED

---

## 📊 סיכום

### תוצאות סריקה (מיפוי חלקי - רק 350 קבצים):
- **סה"כ קבצים שנסרקו:** 350 (מתוך 1,004)
- **קבצים עם שימוש:** 350 (100% מהנסרקים)
- **קבצים ללא שימוש:** 0 (0% מהנסרקים)
- **סה"כ עמודים שנסרקו:** 655 עמודים פעילים

### ⚠️ הערה חשובה:
**מיפוי מלא נדרש:** יש סה"כ **1,004 קבצים** במפת האתר, אבל רק 350 נסרקו בשלב זה. נדרש מיפוי מלא לכל הקבצים - ראה הודעה לצוות 4.

---

## 📁 קבצים שנוצרו

### 1. CSV מעודכן עם עמודת שימוש
**קובץ:** `docs/sitemap/SITEMAP-v1.0-2026-01-14-with-usage.csv`

**עמודה חדשה:** `Used_In_Pages`
- מכילה רשימת קישורים לעמודים שמשתמשים בקובץ
- מופרדים ב-`; ` (פסיק ומרווח)
- ריק עבור עמודים שאינם קבצים

### 2. דוח סיכום JSON
**קובץ:** `docs/testing/reports/attachments-usage-summary.json`

**תוכן:**
- סיכום סטטיסטיקות
- מיפוי מלא של כל קובץ לעמודים שמשתמשים בו

---

## 🔍 איך זה עובד

הסקריפט `scripts/map_attachments_to_pages.php`:

1. **טוען את ה-CSV המקורי** עם כל ה-URLs
2. **מזהה קבצים** לפי:
   - Content Type = "Attachment"
   - URL מכיל `attachment_id=`
   - URL מכיל `/wp-content/uploads/`
   - סיומת קובץ (jpg, png, pdf, וכו')

3. **מזהה עמודים פעילים** (לא קבצים, סטטוס OK)

4. **סורק כל עמוד** ומחפש:
   - URL מלא של הקובץ
   - נתיב יחסי של הקובץ
   - שם הקובץ
   - attachment_id
   - תגיות img/src/href

5. **יוצר CSV מעודכן** עם עמודה חדשה `Used_In_Pages`

---

## 📊 ניתוח תוצאות

### כל הקבצים נמצאו בשימוש
**תוצאה:** 100% מהקבצים נמצאו בשימוש בעמודים פעילים

**הסבר אפשרי:**
- כל הקבצים באמת בשימוש
- או שהחיפוש מוצא התאמות כלליות מדי (למשל, שם קובץ כללי שמופיע בהרבה מקומות)

### המלצה לבדיקה נוספת:
1. לבדוק ידנית כמה קבצים לדוגמה
2. לבדוק אם יש קבצים שמופיעים בהרבה עמודים (432) - זה עלול להצביע על false positives
3. לבדוק קבצים ספציפיים שלא נראים בשימוש

---

## 🎯 שימוש בתוצאות

### לניתוח קבצים לשימוש:
1. לפתוח את `SITEMAP-v1.0-2026-01-14-with-usage.csv`
2. לסנן לפי `Content_Type = "Attachment"`
3. לבדוק את עמודת `Used_In_Pages`:
   - קבצים עם רשימת עמודים = בשימוש
   - קבצים עם עמודה ריקה = לא בשימוש (אבל לא נמצאו כאלה)

### לזיהוי קבצים חשובים:
- קבצים שמופיעים בעמודים רבים = חשובים מאוד
- קבצים שמופיעים בעמוד אחד = חשובים פחות (אבל עדיין בשימוש)

---

## ⚠️ הערות חשובות

1. **False Positives אפשריים:**
   - אם שם קובץ כללי (למשל "image.jpg") מופיע בהרבה מקומות, זה לא אומר שהקובץ הספציפי בשימוש
   - צריך לבדוק ידנית קבצים חשובים

2. **קבצים שלא נמצאו:**
   - אם קובץ לא נמצא בשימוש, זה לא אומר שהוא לא נחוץ
   - יכול להיות שהוא בשימוש ב-CSS, JavaScript, או בדרכים אחרות
   - צריך בדיקה נוספת לפני מחיקה

3. **ביצועים:**
   - הסריקה לוקחת זמן (סריקת 655 עמודים)
   - מומלץ להריץ רק כשצריך

---

## 🔄 השלבים הבאים

1. **בדיקה ידנית:**
   - לבדוק כמה קבצים לדוגמה
   - לוודא שהחיפוש מדויק

2. **זיהוי קבצים חשובים:**
   - קבצים שמופיעים בעמודים רבים
   - קבצים שמופיעים בעמודים חשובים (ראשי, אודות, וכו')

3. **בדיקת קבצים ללא שימוש:**
   - אם יש קבצים ללא שימוש, לבדוק אותם ידנית
   - לבדוק אם הם בשימוש ב-CSS/JS
   - להעביר לבדיקה נוספת לפני מחיקה

---

**נוצר על ידי:** צוות 3 (Gatekeeper - Docs & Git)  
**תאריך:** 2026-01-14  
**סטטוס:** ✅ COMPLETED
